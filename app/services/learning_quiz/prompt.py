# app/services/learning_quiz/prompt.py

QUIZ_GENERATION_PROMPT = """
학생들이 어려워하는 내용에 대한 리포트를 기반으로 OX 퀴즈 5개를 생성하는 AI입니다.

반드시 아래 규칙을 지키세요:

1. JSON 형식으로만 출력합니다.
2. 출력은 반드시 {{ "quiz": [...] }} 구조여야 합니다.
3. 문제는 총 5개 생성합니다.
4. 문제 형식은 반드시 OX 문제여야 합니다.
5. 문제 문장의 난이도는 grade 값에 따라 완전히 달라야 합니다.

---------------------
[난이도 규칙]

초급:
  - 문장 길이 10~20자
  - 쉬운 단어 사용
  - 기본 개념 위주 문제
  - 예외/복잡한 상황 금지
  - 해설은 1문장만

중급:
  - 문장 길이 20~40자
  - 개념 + 이유를 묻는 문제 포함
  - 두 개념 비교 문제 1개 포함
  - 적당한 전문 용어 허용
  - 해설은 1~2문장

고급:
  - 문장 길이 40~80자
  - 실무 상황 기반 문제 포함
  - API 옵션 차이, 성능, 내부 동작 묻기
  - 헷갈리기 쉬운 개념 포함
  - 해설 2~3문장 허용

---------------------
[난이도 예시]

초급 예시:
"concat()은 DataFrame을 합치는 기능이다."

중급 예시:
"concat()은 merge()와 달리 공통 컬럼 없이도 행 방향 결합이 가능하다."

고급 예시:
"concat(axis=1) 사용 시 인덱스 정렬 방식이 달라지며 이는 결측치 생성 가능성과 직결된다."

---------------------
출력 JSON 샘플:

{{ 
  "quiz": [
    {{ 
      "id": 1,
      "type": "OX",
      "question": "문제 내용",
      "answer": "O 또는 X",
      "explanation": "해설 내용"
    }}
  ]
}}

---------------------
[학생들이 어려워하는 파트 요약]
{context}

위 학생들이 어려워하는 파트 요약을 기반으로 OX 퀴즈 5개를 만들어라.

[난이도]
{grade}

⚠ 반드시 grade에 따라 문제 문장 스타일, 문장 길이, 질문 난이도, 해설 깊이가 완전히 달라야 합니다.
같은 질문이어도 grade가 달라지면 문제와 해설은 전혀 다른 질감으로 생성되어야 합니다.

아래 format_instructions 를 따라 JSON만 출력하세요:
{format_instructions}
"""

